Прошивка паяльника Lukey 702

Если у вас вышел из строя микроконтроллер канала паяльника паяльной станции Lukey 702 - используйте эту прошивку, чтобы снова оживить вашу паяльную станцию. Она подойдет как для оригинального микроконтроллера ATMEGA8, так и для возможных замен: ATMEGA88, ATMEGA48 с любыми буквами.
Исходники прилагаются!

Во время отладки устройства, использующего высокое напряжение (более 10 кВ), магическим образом вышел из строя паяльник паяльной станции Lukey 702. Дисплей погас, паяльник перестал нагреваться.
После вскрытия паяльной станции и проверки оказалось, что всё осталось исправно, за исключением микроконтроллера канала паяльника. Микроконтроллер (8-битный Atmel ATMEGA8 в корпусе TQFP-32) убился таким образом, что стал потреблять огромный ток (более 500 мА) и, естественно, перестал подавать признаки жизни.

Паяльная станция Lukey 702 компактная, очень простая и надежная. Она содержит два независимых канала регулирования температуры - для термофена и паяльника. Каждый канал в качестве управляющего микроконтроллера использует ATMEGA8.
Поскольку у меня под рукой всегда есть ATMEGA48 точно в таком же корпусе, я попробовал найти готовую прошивку под него. Оказалось, что умельцы настрочили массу прошивок, но только для ATMEGA8, которая полностью совместима по выводам с ATMEGA48, однако имеет в два раза больше памяти. К сожалению, прошивка для восьмой меги в 48-ю никак не влазит. А вот наоборот - запросто. К сожалению, умельцы с радиокота, где концентрация этих прошивок максимальна, не в меру жадные, и исходники зажали. Понимая примитивность устройства, и имея на руках примерную (но достаточно точную) схему этой паяльной станции (огромное спасибо доброму человеку Aquarius26, который её выложил), вместо ожидания и лишних перемещений для покупки ATMEGA8 я собрал прошивку под ATMEGA48. 
Вы можете узнать в ней компоненты прошивок других устройств, опубликованных на этом сайте: измерителя влажности и температуры на HT-11; контроллера заряда АКБ и освещения для автомобиля KAFIZA.
Подготовлена прошивка в Atmel Studio 7, написана на С++. Алгоритм работы от оригинального практически не отличается, поэтому прилагать видео или фотографии работы паяльной станции после ремонта смысла нету - вы и так прекрасно знаете, как работает паяльная станция Lukey.
Если вам захочется усовершенствовать эту прошивку паяльника - есть огромное пространство для творчества, поскольку использовано менее половины флешки микроконтроллера и еще меньше RAM и EEPROM:
				Program Memory Usage 	:	1960 bytes   47.9 % Full
				Data Memory Usage 		:	110 bytes   21.5 % Full
				EEPROM Memory Usage 	:	4 bytes   1.6 % Full
В качестве единственного недостатка данной прошивки могу отметить незначительную зависимость яркости свечения символа от количества задействованных сегментов, поскольку китайцы сэкономили 5 резисторов. :) Для меня это совершенно несущественно в данном устройстве, ну а для перфекционистов - хороший повод внести свою лепту в улучшение этой прошивки, дополнив посимвольную динамическую индикацию посегментной.

Какие ставить фьюзы - смотрите на скриншоте.
Также привожу фотографии платы паяльной станции с указанием сигналов на контактах вилки для внутрисхемного программирования канала паяльника. Учтите, что паяльник должен быть отключен от своего гнезда, иначе прошить микроконтроллер не удастся.
Также не забывайте о технике безопасности во время ремонта паяльной станции, вытаскивайте вилку паяльной станции из розетки 220В всегда, когда возитесь с её перепрошивкой и заменой деталей.

Вы можете использовать представленную прошивку как вам заблагорассудится, а в качестве благодарности - оставьте ссылку на эту запись или наш сайт vdd-pro.ru на вашем сайте или форуме. 

Удачи!
